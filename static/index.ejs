<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Veleta Naranja</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous">

    <style>
      body,html{height:100%;background:#e30713;background:linear-gradient(90deg,#e30713 40%,#2596be 60%)}
      .boton-modal{position:absolute;margin:3%;z-index:15}.img-veleta{width:70%;margin:10px}
      .modal-body{display:flex;justify-content:center;align-items:center;flex-direction:column}p{text-align:justify}
      .div-info{position:absolute;z-index:50;right:0;padding:3%;font-size:small;line-height:0}
      .frame{position:relative;z-index:10;width:100%;height:90%;display:flex;align-items:center;justify-content:center}
      .arrow{width:auto;height:50%;transform-origin:50% 50%;animation-timing-function:ease-in-out}
      @keyframes oscilate{from{transform:rotate(-6deg)}to{transform:rotate(6deg)}}
    </style>
</head>
<body>

  <%- include('modal.ejs'); %>

    <div class="div-info">
      <p>Ultima actualización: <%= lastUpdate %></p>
      <p>Dirección del viento: <%= windAngle %>º</p>
    </div>

    <button type="button" class="btn btn-light boton-modal" data-bs-toggle="modal" data-bs-target="#exampleModal">
        ¿Qué es esto?
    </button>

    <div class="frame">
        <img id="arrow" class="arrow" src="arrow.png" alt="arrow" data-angle="<%= windAngle %>">
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous">
    </script>
    <script>
      const t=document.querySelector("#arrow");let e=0,r=e;const a=4;let n=1;
      const o=parseInt(t.dataset.angle);e=o,r=e,
      setInterval((()=>{e<r-4&&(n=1),e>r+4&&(n=-1),e+=.15*n,t.style.transform=`rotate(${e}deg)`}),35);
    </script>
</body>


</html>